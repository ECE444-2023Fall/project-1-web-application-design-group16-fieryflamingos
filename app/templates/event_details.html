{% extends 'base.html' %}
{% block title %} Event Detail {% endblock %}
{% block content %}
<!DOCTYPE html>
<html>

<head>
	<title>Occasional | Event Details</title>
	<link rel="stylesheet" type="text/css"
		href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" />
</head>

<body>
	<div class="events-title"
		style="display: flex; margin-top: 6%; margin-right: 10%; margin-left: 10%; margin-bottom: 5%;">
		<div style="flex: 50%">
			<div class="main-title" style="margin-bottom: 40px;">
				{{event.title}}
			</div>
			<div class="time-label" style="margin-bottom: 8px;">
				<span class="label-bold">
					Date & Time:
				</span>
				<span class="label">
					{{ event.event_date.from_date.strftime('%b %d, %Y %I:%M') }} - {{ event.event_date.to_date.strftime('%I:%M %p').lstrip('0')|upper }}
				</span>
			</div>
			<div class="org-label" style="margin-bottom: 8px;">
				<span class="label-bold">
					Organizer:
				</span>
				<span class="label">
					{{event.organizer.name}}
				</span>
			</div>
			{% if user_is_owner %}
				<a class="button-main" href="/event/update/{{event.id}}" style="text-decoration: none">Edit</a>

			{% else %}
				{% if registration_open %}
				<form action="" method="POST">
					{{form.hidden_tag()}}
					{{form.submit(class="button-main", style="margin-top: 20%;")}}
				</form>
				{% endif %}
			{% endif %}

		</div>
		<div style="flex: 17%;"></div>
		<div style="flex: 33%; margin-top: 15px;">
			<div class="subtitle" style="margin-bottom: 14px" ;>
				Location
			</div>
			<div class="address-label" style="margin-bottom: 8px;">
				<span class="label-bold">
					Address:
				</span>
				<span class="label">
					{{event.location.address}}
				</span>
			</div>
			<div class="room-label" style="margin-bottom: 10px;">
				<span class="label-bold">
					Room:
				</span>
				<span class="label">
					{{event.location.room}}
				</span>
			</div>
			<iframe width=80% height=200px style="border: 0; margin-top: 16px;" loading="lazy" allowfullscreen
				referrerpolicy="no-referrer-when-downgrade" src="https://www.google.com/maps/embed/v1/place?key=API_KEY
                  &q=Space+Needle,Seattle+WA">
			</iframe>
		</div>
	</div>

	<div class="event-details" style="background-color: #F1F5F9;">
        <div style="margin-left: 10%; margin-right: 12%; padding-top: 40px; padding-bottom: 80px;">
            <div class="title" style="margin-bottom: 40px; margin-top: 10px;">
                Event Details
            </div>
            <div style="display: flex;">
                <div class="white-card-container" style="flex: 60%;">
                    <div class="subtitle" style="margin-bottom: 28px;">
                        Description
                    </div>
                    <hr style="margin-bottom: 28px; width: auto;">
                    <p class="body-text">
						{{event.description}}
                    </p>
                </div>
                <div style="flex: 8%;"></div>
                <div class="white-card-container" style="flex: 32%; height: 300px;">
                    <div class="subtitle">
                        Related Interests
                    </div>
                    <hr style="width: auto;">
                    <div style="display: flexbox; flex-direction: row; justify-content: flex-start;">
						{% for interest in targeted_preferences %}
                        <button class="interest-tag">
                            {{interest.preference}}
                            <div class="tag-number">
                                {{interest.events_with_preference}}
                            </div>
                        </button>
						{% endfor %}

                    </div> 
                </div>
            </div>
            
        </div>
    </div>
	
</body>

</html>
{% endblock %}