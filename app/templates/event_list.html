{% import "bootstrap/wtf.html" as wtf %}
{% extends 'base.html' %}
{% block content %}
<!DOCTYPE html>
<html>

<head>
	<title>Discover</title>
	<link rel="stylesheet" type="text/css"
		href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" />
	<link rel="stylesheet" href="/static/css/forms.css" />
</head>

<body>
	{% for message in get_flashed_messages() %}
	<div class="flash alert alert-success col-sm-4" role="success">
		{{ message }}
	</div>
	{% endfor %}

	<div style="margin-left: 10%; margin-right: 10%;">
		<div class="main-title" style="margin-bottom: 40px; font-size: 30px;">
			Filter Parameters
		</div>

		{% if error %}
		<p class="alert alert-danger col-sm-4" role="danger">
			<strong>Error:</strong> {{ error }}
		</p>
		{% endif %}

		<form action="" mthod="post">
			<div class="label-bold" style="margin-bottom: 10px;">
				Keyword Search
			</div>
			{{ form.search(class="search-form", style="width: 100%") }}
		
			<div style="display: flex; margin-top: 10px; margin-bottom: 10px;">
				<div class="label-bold" style="width: 50%;">
					Start Date
				</div>
				<div class="label-bold" style="width: 50%;">
					End Date
				</div>
			</div>
		
			<div style="display: flex; margin-top: 10px; margin-bottom: 10px;">
				<div style="width: 50%;">
					{{ form.start_date(class="search-form", style="width: 90%") }}
				</div>
				<div style="width: 50%;">
					{{ form.end_date(class="search-form", style="width: 100%") }}
				</div>
			</div>
		
			<div class="label-bold" style="margin-top: 10px; margin-bottom: 10px;">
				Interests
			</div>
			<div>
				{{ form.targeted_preferences(class="search-form", style="width: 100%; height: 20%") }}
			</div>
		
			<div style="margin-bottom: 40px; margin-top: 40px; display: flex;">
				<div style="margin-right: 40px;">
					{{ form.submit(class="button-main") }}
				</div>
				<div>
					{{ form.prev_page(class="button-main") }}
					{{ form.next_page(class="button-main") }}
				</div>
			</div>
		</form>
		
		
	</div>


	<div style="background-color: #F1F5F9; padding-bottom: 60px;">
		<div style="margin-left: 10%; margin-right: 10%;">
			<div class="main-title" style="margin-bottom: 40px; padding-top: 40px; font-size: 30px;">
				Filtered Events
			</div>
			{% for event in events %}
				<a href="{{event.link}}" style="text-decoration: none">
					<div class="white-card-container" style="flex: 60%; margin-bottom: 30px;">
						<div class="title" style="margin-bottom: 16px;" >
							{{event.title}}
						</div>
						<hr style="margin-bottom: 20px; width: auto;">
						<div style="display: flex; margin-bottom: 8px;">
							<div style="display: flex; width: 50%;">
								<span class="label-bold" style="margin-right: 6px;">
									Organizer: 
								</span>
								<div class="label">
									{{event.organizer.name}}
								</div>
							</div>
							<div style="display: flex; width: 50%;">
								<span class="label-bold" style="margin-right: 6px;">
									Time: 
								</span>
								<div class="label">
									{{ event.event_date.from_date.strftime('%b %d, %Y %I:%M') }} - {{ event.event_date.to_date.strftime('%I:%M %p').lstrip('0')|upper }}
								</div>
							</div>
						</div>
						<div style="display: flex; margin-bottom: 16px;">
							<div style="display: flex; width: 50%;">
								<span class="label-bold" style="margin-right: 6px;">
									Location: 
								</span>
								<div class="label">
									{{event.location.address}}, {{event.location.room}}
								</div>
							</div>
						</div>			
					</div>
				</a>			
			{% endfor %}
		</div>
	</div>

	<div>
		
	</div>
</body>

</html>
{% endblock %}